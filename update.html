<!DOCTYPE html>
<html>
    <head>
        <title>Resume Edit</title>
        <link rel="stylesheet" href="update.css">
        <script src="update.js"></script>
    </head>

    <body>
        <div class="topnav">
            <a class="loginButton" href="index.html">Home</a>
        </div>
        <div class="container">
            <!-- <form> -->
                <div id="headerContainer">
                    <!-- <div class="imgSource">
                        <img src="https://fiverr-res.cloudinary.com/image/upload/t_profile_original,q_auto,f_auto/v1/attachments/profile/photo/6dd201eecbbf3e0551038db54dcc489d-954317961602167998490/JPEG_20201008_223952_2739768161554303872.jpg" alt="BioPic" width="400" height="400">
                    </div>
                    <div id="headerContent" class="headers">
                        <label for="nameInput">Name</label><br>
                        <input type="text" id="nameInput" name="name" value="Gerard Gavin Josol"><br>
                        <label for="professionInput">Profession</label><br>
                        <input type="text" id="professionInput" name="profession" value="3D Artist"><br>
                        <label for="aboutInput">About me</label><br>
                        <textarea id="aboutInput" name="aboutMe" rows="14" cols="130">Computer programmer with 3 years of experience and 7 years of experience in 3D modeling. Possess a Bachelor of Science in Computer Science with intermediate knowledge in blender and beginner knowledge in Unity game engine. Programming experience consists mostly of C,C++,C#, and Java while 3D modeling experience is in inanimate objects and scenes. Looking to leverage knowledge and experience into a role as Game developer or 3D artist.</textarea>
                    </div> -->
                </div>
                <div class="educationOverall">
                    <h1 class="education Label">EDUCATION<hr class="line education"></h1>
                    <div id="Education">
                        <div class="education form div">
                            <form>
                                <label class="education input label" for="schoolLogoInput">Image URL</label><br>
                                <input class="education input box" type="text" id="schoolLogoInput"><br>
                                <label class="education input label" for="schoolInput">School Name</label><br>
                                <input class="education input box" type="text" id="schoolInput"><br>
                                <label class="education input label" for="courseInput">Program</label><br>
                                <input class="education input box" type="text" id="courseInput"><br>
                                <label class="education input label" for="yearStartInput">Year started</label>
                                <label class="education input label" for="yearEndInput" id="eduYearEndLabel">Year ended</label><br>
                                <input class="education input box" type="number" min="1900" max="2099" step="1" id="yearStartInput">
                                <input class="education input box" type="number" min="1900" max="2099" step="1" id="yearEndInput">
                                <div id="educationSubmitButton" onclick="addEducation()">Add</div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="organizations overall">
                    <h1 class="organizations Label">ORGANIZATIONS<hr class="line organizations"></h1>
                    <div id="Organizations">
                        <div class="organization form div">
                            <form>
                                <label class="organization input label" for="orgLogoInput">Image URL</label>
                                <input class="organization input box" type="text" id="orgLogoInput">
                                <label class="organization input label" for="orgNameInput">Organization Name</label>
                                <input class="organization input box" type="text" id="orgNameInput">
                                <label class="organization input label" for="yearStartInputOrg">Year start</label>
                                <input class="organization input box" type="number" min="1900" max="2099" step="1" id="yearStartInputOrg">
                                <div id="organizationSubmitButton" onclick="addOrganization()">Add</div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="works overall">
                    <h1 class="works Label">WORKS<hr class="line works"></h1>
                    <div id="Works">
                        <div class="work form div">
                            <label class="work input label" for="workImageInput">Image URL</label>
                            <input class="work input box" type="text" id="workImageInput">
                            <div id="workSubmitButton" onclick="addWork()">Add</div>
                        </div>
                        <!-- <div class="works container image 1">
                            <img src="https://cdnb.artstation.com/p/assets/images/images/031/390/125/large/gerard-josol-3d-chess-watermarked.jpg?1603472394">
                        </div>
                        <div class="works container image 2">
                            <img src="https://cdnb.artstation.com/p/assets/images/images/031/390/099/large/gerard-josol-glass-watermarked.jpg?1603472337">
                        </div> -->
                    </div>
                </div>
                <div class="skills overall">
                    <h1 class="skills Label">SKILLS<hr class="line skills"></h1>
                    <div id="Skills">
                        <div class="skills form div">
                            <form>
                                <label class="skills input label" for="skillLogoInput">Image URL</label><br>
                                <input class="skills input box" type="text" id="skillLogoInput"><br>
                                <label class="skills input label" for="skillNameInput">Skill Title</label><br>
                                <input class="skills input box" type="text" id="skillNameInput"><br>
                                <label class="skills input label" for="skillLevelInput">Level</label>
                                <label class="skills input label" for="yearStartInputSkill" id="skillYearStartLabel">Year start</label><br>
                                <select class="skills input box" id="skillLevelInput">
                                    <option value="beginner">Beginner</option>
                                    <option value="intermediate">Intermediate</option>
                                    <option value="expert">Expert</option>
                                </select>
                                <input class="skills input box" type="number" min="1900" max="2099" step="1" id="yearStartInputSkill">
                                <div id="skillsSubmitButton" onclick="addSkill()">Add</div>
                            </form>
                        </div>
                        <!-- <div class="addButton" id="addSkillButton" onclick="addSkill()">Add Skill</div>
                        <div class="skills container input">
                            <div class="organizations image input">
                                <img src="https://i0.wp.com/umap.org/wp-content/uploads/2017/06/De-La-Salle-University.png?fit=660%2C660" alt="DLSU Logo" width="75" height="75">
                            </div>
                            <label class="skills input label" for="skillNameInput">Skill</label>
                            <input class="skills input box" type="text" id="skillNameInput"><br>
                            <label class="skills input label" for="skillNameInput">Skill Level</label>
                            <input class="skills input box" type="text" id="skillNameInput"><br>
                            <label class="skills input label" for="yearInput">Year start</label>
                            <input class="skills input box" type="number" min="1900" max="2020" step="1" id="yearInput">
                            <div class="removeButton" id="removeSkillButton" onclick="removeSkill()"><span>-</span></div>
                        </div> -->
                    </div>
                </div>
                <div class="experience overall">
                    <h1 class="experience Label">EXPERIENCE<hr class="line experience"></h1>
                    <div id="experiences">
                        <div class="experience form div">
                            <form>
                                <label class="experience input label" for="jobLogoInput">Image URL</label><br>
                                <input class="experience input box" type="text" id="jobLogoInput"><br>
                                <label class="experience input label" for="jobNameInput">Job Title</label><br>
                                <input class="experience input box" type="text" id="jobNameInput"><br>
                                <label class="experience input label" for="companyNameInput">Company Name</label><br>
                                <input class="experience input box" type="text" id="companyNameInput"><br>
                                <label class="experience input label" for="yearStartInputExp">Year Started</label>
                                <label class="experience input label" for="yearEndInpuExp" id="expYearEndLabel">Year Ended</label><br>
                                <input class="experience input box" type="number" min="1900" max="2099" step="1" id="yearStartInputExp">
                                <input class="experience input box" type="number" min="1900" max="2099" step="1" id="yearEndInputExp"><br>
                                <label class="experience input label">Tasks</label><br>
                                <input class="experience input box" type="text" id="taskInputExp1"><br>
                                <input class="experience input box" type="text" id="taskInputExp2"><br>
                                <input class="experience input box" type="text" id="taskInputExp3"><br>
                                <div id="experienceSubmitButton" onclick="addExp()">Add</div>
                            </form>
                        </div>
                        <!-- <div class="addButton" id="addExperienceButton" onclick="addExperience()">Add Experience</div>
                        <div class="experience container">
                            <div class="experience image">
                                <img src="https://scontent.fmnl3-3.fna.fbcdn.net/v/t1.0-9/p960x960/64904937_2943401985700780_2848627176352251904_o.png?_nc_cat=102&ccb=2&_nc_sid=85a577&_nc_ohc=Uf-OOhtW0nkAX8_b6ih&_nc_ht=scontent.fmnl3-3.fna&oh=00a86860be46388654fb2d95ef21de63&oe=5FE14028" alt="Jank Logo">
                            </div>
                            <label class="experience input label" for="jobTitleInput">Job Title</label>
                            <input class="experience input box" type="text" id="jobTitleInput">
                            <label class="experience input label" for="companyNameInput">Company Name</label>
                            <input class="experience input box" type="text" id="companyNameInput">
                            <div class="addButton" id="addTaskButton" onclick="addTask()">Add Task</div>
                            <div class="addButton" id="removeTaskButton" onclick="removeTask()">Remove Task</div>
                            <div class="removeButton" id="removeExperienceButton" onclick="removeExperience()"><span>-</span></div>
                            <div class="taskListContainer" id="taskList">
                                <label class="experienctask input label" for="taskInput1">Task 1</label>
                                <input class="experienctask input box" type="text" id="taskInput1">
                                <label class="experienctask input label" for="taskInput2">Task 2</label>
                                <input class="experienctask input box" type="text" id="taskInput2">
                            </div>
                        </div> -->
                    </div>
                </div>
                <!-- <div class="submitButtonDiv">
                    <input class="submitButton" type="submit" value="Submit">
                </div> -->
            <!-- </form> -->
            <div class="links overall">
                <h1 class="links Label">External links<hr class="line links"></h1>
                <div id="links">
                    <div class="links form div">
                        <form>
                            <label class="link input label" for="githubLink">GitHub Link</label><br>
                            <input class="link input box" type="text" id="githubLink"><br>
                            <label class="link input label" for="fiverrLink">Fiverr Link</label><br>
                            <input class="link input box" type="text" id="fiverrLink"><br>
                            <label class="link input label" for="artstationLink">Artstation Link</label><br>
                            <input class="link input box" type="text" id="artstationLink"><br>
                            <label class="link input label" for="twitterLink">Twitter Link</label><br>
                            <input class="link input box" type="text" id="twitterLink"><br>
                            <label class="link input label" for="igLink">Instagram Link</label><br>
                            <input class="link input box" type="text" id="igLink"><br>
                            <label class="link input label" for="linkedinLink">linkedIn Link</label><br>
                            <input class="link input box" type="text" id="linkedinLink"><br>
                            <div id="linkSubmitButton" onclick="updateLink()">Add</div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- <div id="otherLinks">
            <a href="https://github.com/josol7"><img alt="Github" src="Logos/Github.png" class="pic github"></img></a>
            <a href="https://www.fiverr.com/cabbageboi?up_rollout=true"><img alt="Fiverr" src="Logos/Fiverr.png" class="pic fiverr"></img></a>
            <a href="https://afraid-combination.artstation.com/"><img alt="Artstation" src="Logos/Artstation.png" class="pic artstation"></img></a>
            <a href="https://twitter.com/GerryJosol"><img alt="Twitter" src="Logos/Twitter.png" class="pic twitter"></img></a>
            <a href="https://www.instagram.com/its_gerrino/?hl=en"><img alt="Instagram" src="Logos/Instagram.png" class="pic instagram"></img></a>
            <a href="https://www.instagram.com/its_gerrino/?hl=en"><img alt="Instagram" src="Logos/Instagram.png" class="pic instagram"></img></a>
        </div> -->

        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>

        <script>
        function updateHeader(){
            console.log("updating header");
            var name = document.getElementById("nameInput").value;
            var job = document.getElementById("jobInput").value;
            var about = document.getElementById("aboutInput").value;
            var image = document.getElementById("imageFaceInput").value;

            if(name != "" && job != "" && about != "" && image != ""){
                db.collection("Headers").doc("MpXRcRdcoqQIudjYpvml").update({
                    "about": about,
                    "name": name,
                    "profession": job,
                    "image" : image
                })
                .then(function(docRef) {
                    console.log("Document updated with ID: ", docRef);
                    location.reload();
                })
                .catch(function(error) {
                    console.error("Error updating document: ", error);
                    alert("Error in updating Data");
                });
            }
            else{
                alert("All header fields must have content")
            }
        }

        function addEducation(){
            console.log("Adding Education");
            var imageInput = document.getElementById("schoolLogoInput").value;
            var schoolNameInput = document.getElementById("schoolInput").value;
            var courseInput = document.getElementById("courseInput").value;
            var yearStartInput = document.getElementById("yearStartInput").value;
            var yearEndInput = document.getElementById("yearEndInput").value;

            console.log(imageInput);

            if(imageInput != "" && schoolNameInput != "" && courseInput != "" && yearStartInput != "" && yearEndInput != ""){
            db.collection("Education").add({
                "Program": courseInput,
                "School": schoolNameInput,
                "image": imageInput,
                "year_start": yearStartInput,
                "year_end": yearEndInput
            })
            .then(function(docRef){
                console.log("Document added with ID: " + docRef.id);
                location.reload();
            })
            .catch(function(error) {
                console.error("Error adding document: ", error);
                alert("Error in adding Education");
            });
            }
            else{
                alert("All education fields must have content")
            }
        }

        function addOrganization(){
            console.log("Adding Organization");
            var imageInput = document.getElementById("orgLogoInput").value;
            var orgName = document.getElementById("orgNameInput").value;
            var yearStart = document.getElementById("yearStartInputOrg").value;

            if(imageInput != "" && orgName != "" && yearStart != ""){
                db.collection("Organizations").add({
                    "image": imageInput,
                    "title": orgName,
                    "year_start": yearStart
                })
                .then(function(docRef){
                    console.log("Document added with ID: " + docRef.id);
                    location.reload();
                })
                .catch(function(error){
                    console.error("Error adding document: ", error);
                    alert("Error in adding Organization");
                })
            }
            else{
                alert("All Organization fields must have content");
            }
        }

        function addWork(){
            console.log("Adding work");
            var imageInput = document.getElementById("workImageInput").value;

            if(imageInput != ""){
                db.collection("Works").add({
                    "image": imageInput
                })
                .then(function(docRef){
                    console.log("Document added with ID: " + docRef.id);
                    location.reload();
                })
                .catch(function(error){
                    console.error("Error adding document: ", error);
                    alert("Error in adding Work");
                })
            }
            else{
                alert("Image link must be present");
            }
        }

        function addSkill(){
            console.log("Adding work");
            var imageInput = document.getElementById("skillLogoInput").value;
            var skillNameInput = document.getElementById("skillNameInput").value;
            var skillLevelInput = document.getElementById("skillLevelInput").value;
            var yearInput = document.getElementById("yearStartInputSkill").value;

            if(imageInput != "" && skillNameInput != "" && skillLevelInput != "" && yearInput != ""){
                db.collection("Skills").add({
                    "image": imageInput,
                    "level": skillLevelInput,
                    "skill": skillNameInput,
                    "year_start": yearInput
                })
                .then(function(docRef){
                    console.log("Document added with ID: " + docRef.id);
                    location.reload();
                })
                .catch(function(error){
                    console.error("Error adding document: ", error);
                    alert("Error in adding Skill");
                })
            }
            else{
                alert("All skill fields must be present");
            }
        }

        function addExp(){
            console.log("Adding Experience");
            var imageInput = document.getElementById("jobLogoInput").value;
            var jobTitle = document.getElementById("jobNameInput").value;
            var companyName = document.getElementById("companyNameInput").value;
            var yearStart = document.getElementById("yearStartInputExp").value;
            var yearEnd = document.getElementById("yearEndInputExp").value;
            var task1 = document.getElementById("taskInputExp1").value;
            var task2 = document.getElementById("taskInputExp2").value;
            var task3 = document.getElementById("taskInputExp3").value;
            var tasks = [];

            if(task1 != "")
                tasks.push(task1);
            if(task2 != "")
                tasks.push(task2);
            if(task3 != "")
                tasks.push(task3);

            if(imageInput != "" && jobTitle != "" && companyName != "" && yearStart != "" && yearEnd != "" && tasks.length>0){
                db.collection("Experience").add({
                    "image": imageInput,
                    "job": jobTitle,
                    "list": tasks,
                    "title": companyName,
                    "year_end": yearEnd,
                    "year_start": yearStart
                })
                .then(function(docRef){
                    console.log("Document added with ID: " + docRef.id);
                    location.reload();
                })
                .catch(function(error){
                    console.error("Error adding document: ", error);
                    alert("Error in adding Skill");
                })
            }
            else{
                alert("All experience fields and at least 1 task field must have content");
            }
        }

        function updateLink(){
            var githubLink = document.getElementById("githubLink").value;
            var fiverrLink = document.getElementById("fiverrLink").value;
            var artstationLink = document.getElementById("artstationLink").value;
            var twitterLink = document.getElementById("twitterLink").value;
            var igLink = document.getElementById("igLink").value;
            var linkedinLink = document.getElementById("linkedinLink").value;

            if(githubLink != "" || fiverrLink != "" || artstationLink != "" || twitterLink != "" || igLink != "" || linkedinLink != ""){
                if(githubLink != ""){
                    db.collection("Logos").doc("1").update({
                        "link": githubLink
                    })
                    .then(function(docRef) {
                        console.log("Document updated with ID: ", docRef);
                        location.reload();
                    })
                    .catch(function(error) {
                        console.error("Error updating document: ", error);
                        alert("Error in updating Data");
                    });
                }
                if(fiverrLink != ""){
                    db.collection("Logos").doc("2").update({
                        "link": fiverrLink
                    })
                    .then(function(docRef) {
                        console.log("Document updated with ID: ", docRef);
                        location.reload();
                    })
                    .catch(function(error) {
                        console.error("Error updating document: ", error);
                        alert("Error in updating Data");
                    });
                }
                if(artstationLink != ""){
                    db.collection("Logos").doc("3").update({
                        "link": artstationLink
                    })
                    .then(function(docRef) {
                        console.log("Document updated with ID: ", docRef);
                        location.reload();
                    })
                    .catch(function(error) {
                        console.error("Error updating document: ", error);
                        alert("Error in updating Data");
                    });
                }
                if(twitterLink != ""){
                    db.collection("Logos").doc("4").update({
                        "link": twitterLink
                    })
                    .then(function(docRef) {
                        console.log("Document updated with ID: ", docRef);
                        location.reload();
                    })
                    .catch(function(error) {
                        console.error("Error updating document: ", error);
                        alert("Error in updating Data");
                    });
                }
                if(igLink != ""){
                    db.collection("Logos").doc("5").update({
                        "link": igLink
                    })
                    .then(function(docRef) {
                        console.log("Document updated with ID: ", docRef);
                        location.reload();
                    })
                    .catch(function(error) {
                        console.error("Error updating document: ", error);
                        alert("Error in updating Data");
                    });
                }
                if(linkedinLink != ""){
                    db.collection("Logos").doc("6").update({
                        "link": linkedinLink
                    })
                    .then(function(docRef) {
                        console.log("Document updated with ID: ", docRef);
                        location.reload();
                    })
                    .catch(function(error) {
                        console.error("Error updating document: ", error);
                        alert("Error in updating Data");
                    });
                }
            }
            else{
                alert("No Links Detected");
            }
        }

        function deleteEducation(id){
            db.collection("Education").doc(id).delete()
            .then(function(docRef){
                location.reload();
            })
            .catch(function(error) {
                console.error("Error adding document: ", error);
                alert("Error in deleting Education");
            });
        }

        function deleteOrg(id){
            db.collection("Organizations").doc(id).delete()
            .then(function(docRef){
                location.reload();
            })
            .catch(function(error) {
                console.error("Error deleting document: ", error);
                alert("Error in deleting Organization");
            });
        }

        function deleteWork(id){
            db.collection("Works").doc(id).delete()
            .then(function(docRef){
                location.reload();
            })
            .catch(function(error) {
                console.error("Error deleting document: ", error);
                alert("Error in deleting Organization");
            });
        }
        
        function deleteSkill(id){
            db.collection("Skills").doc(id).delete()
            .then(function(docRef){
                location.reload();
            })
            .catch(function(error) {
                console.error("Error deleting document: ", error);
                alert("Error in deleting Organization");
            });
        }

        function deleteExp(id){
            db.collection("Experience").doc(id).delete()
            .then(function(docRef){
                location.reload();
            })
            .catch(function(error) {
                console.error("Error deleting document: ", error);
                alert("Error in deleting Experience");
            });
        }

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyAdlgSDGja8_O6ePhX2RIUL-fmfcx_Fb3Q",
            authDomain: "machine-project-1.firebaseapp.com",
            databaseURL: "https://machine-project-1.firebaseio.com",
            projectId: "machine-project-1",
            storageBucket: "machine-project-1.appspot.com",
            messagingSenderId: "49518443103",
            appId: "1:49518443103:web:9d0b0eea257205c06539ea",
            measurementId: "G-S8YREF6Y1X"
        };
        // Initialize Firebase
        var app = firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        var db = firebase.firestore(app)

        db.collection("Headers").get().then((querySnapshot) =>{
            querySnapshot.forEach((doc) =>{
                console.log(doc.data())
                console.log(`  ${doc.data().name}`);
                console.log(`  ${doc.data().profession}`);
                console.log(`  ${doc.data().about}`);
                console.log(`  ${doc.data().image}`);
                render_header(doc.data().image, doc.data().name, doc.data().profession, doc.data().about);
            });
        });

        db.collection("Education").get().then((querySnapshot) =>{
            querySnapshot.forEach((doc) =>{
                console.log(doc.data())
                console.log(`  ${doc.data().Program}`);
                console.log(`  ${doc.data().School}`);
                console.log(`  ${doc.data().image}`);
                console.log(`  ${doc.data().year_start}`);
                console.log(`  ${doc.data().year_end}`);
                render_education(doc.id,doc.data().image, doc.data().School, doc.data().Program, doc.data().year_start, doc.data().year_end)
            });
        });

        db.collection("Organizations").get().then((querySnapshot) =>{
            querySnapshot.forEach((doc) =>{
                console.log(doc.data())
                console.log(`  ${doc.data().image}`);
                console.log(`  ${doc.data().title}`);
                console.log(`  ${doc.data().year_start}`);
                render_organizations(doc.id,doc.data().image, doc.data().title, doc.data().year_start)
            })
        })

        db.collection("Works").get().then((querySnapshot) =>{
            querySnapshot.forEach((doc) =>{
                console.log(doc.data())
                console.log(`  ${doc.data().images}`);
                render_works(doc.id,doc.data().image);
            })
        })

        db.collection("Skills").get().then((querySnapshot) =>{
            querySnapshot.forEach((doc) =>{
                console.log(doc.data())
                console.log(`  ${doc.data().skill}`);
                console.log(`  ${doc.data().level}`);
                console.log(`  ${doc.data().image}`);
                console.log(`  ${doc.data().year_start}`);
                render_skills(doc.id,doc.data().image, doc.data().skill, doc.data().level, doc.data().year_start);
            });
        });

        db.collection("Experience").get().then((querySnapshot) =>{
            querySnapshot.forEach((doc) =>{
                console.log(doc.data())
                console.log(`  ${doc.data().job}`);
                console.log(`  ${doc.data().image}`);
                console.log(`  ${doc.data().year_start}`);
                console.log(`  ${doc.data().year_end}`);
                console.log(`  ${doc.data().title}`);
                console.log(`  ${doc.data().list[0]}`);
                render_experience(doc.id,doc.data().image, doc.data().job, doc.data().title, doc.data().year_start, doc.data().year_end, doc.data().list);
            });
        });

        // db.collection("Logos").get().then((querySnapshot) =>{
        //     querySnapshot.forEach((doc) =>{
        //         console.log(doc.data())
        //         console.log(`  ${doc.data().image}`);
        //         console.log(`  ${doc.data().link}`);
        //         render_links(doc.data().link, doc.data().image)
        //     })
        // })
        </script>
    </body>
</html>